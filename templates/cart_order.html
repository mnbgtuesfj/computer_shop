<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>付款資訊</title>
    <link rel="stylesheet" href="static/css/cart_order_style.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link href="C:\Users\mnbgt\Desktop\website\fontawesome-free-5.15.3-web\css\all.css" rel="stylesheet">
</head>

<body>
    <div class="Information_bar">
        <a href="/"><img class="website_logo" src="static\images\首頁_LOGO.png"></a>
        <a href="/login" style="text-decoration: none; color: black">
            <i class="fas fa-user fa-2x" id="user"><span class="user_icon"> 登入 /
                    註冊&ensp;&ensp;&ensp;&ensp;&ensp;|</span></i>
        </a>
        <a href="/cart" style="text-decoration: none; color: black">
            <i class="fas fa-shopping-cart fa-2x" aria-hidden="true" id="cart"><span class="cart_icon"> 購物車</span></i>
        </a>
    </div>
    <div class="sidebar_new">
        <nav class="sidebar" style="float: left;">
            <div class="text">電腦零組件分類</div>
            <!-- 搜尋 -->
            <!-- <div class="search_box">
                <form>
                    <input type="text" placeholder="請輸入關鍵字">
                    <input type="submit" value="搜尋">
                </form>
            </div> -->
            <ul>
                <li><a href="#" class="CPU-btn">中央處理器<span class="fas fa-caret-down 1"></span></a>
                    <ul class="CPU-show">
                        <li><a href="#" class="CPU_INTEL-btn">Intel<span class="fas fa-caret-down 1-1"></span></a>
                            <ul class="CPU_INTEL-show">
                                <li><a href="/product_info">Core i9系列(第11代)</a></li>
                                <li><a href="#">Core i7系列(第11代)</a></li>
                                <li><a href="#">Core i5系列(第11代)</a></li>
                            </ul>
                        </li>
                        <li><a href="#" class="CPU_AMD-btn">AMD<span class="fas fa-caret-down 1-2"></span></a>
                            <ul class="CPU_AMD-show">
                                <li><a href="#">AMD Ryzen 9(5000系列)</a></li>
                                <li><a href="#">AMD Ryzen 7(5000系列)</a></li>
                                <li><a href="#">AMD Ryzen 5(5000系列)</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li><a href="#" class="MB-btn">主機板<span class="fas fa-caret-down 2"></span></a>
                    <ul class="MB-show">
                        <li><a href="#" class="MB_Intel-btn">Intel<span class="fas fa-caret-down 2-1"></span></a>
                            <ul class="MB_INTEL-show">
                                <li><a href="#">H410 | 1200腳位</a></li>
                                <li><a href="#">H510 | 1200腳位</a></li>
                                <li><a href="#">H570 | 1200腳位</a></li>
                                <li><a href="#">B460 | 1200腳位</a></li>
                                <li><a href="#">B560 | 1200腳位</a></li>
                                <li><a href="#">Z490 | 1200腳位</a></li>
                                <li><a href="#">Z590 | 1200腳位</a></li>
                            </ul>
                        </li>
                        <li><a href="#" class="MB_AMD-btn">AMD<span class="fas fa-caret-down 2-2"></span></a>
                            <ul class="MB_AMD-show">
                                <li><a href="#">AM4 X570</a></li>
                                <li><a href="#">AM4 B550</a></li>
                                <li><a href="#">AM4 A520</a></li>
                                <li><a href="#">AM4 X470</a></li>
                                <li><a href="#">AM4 B450</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li><a href="#" class="RAM-btn">記憶體<span class="fas fa-caret-down 3"></span></a>
                    <ul class="RAM-show">
                        <li><a href="#">DDR4-8GB</a></li>
                        <li><a href="#">DDR4-16GB</a></li>
                    </ul>
                </li>

                <li><a href="#" class="VGA-btn">顯示卡<span class="fas fa-caret-down 4"></span></a>
                    <ul class="VGA-show">
                        <li><a href="#" class="VGA_NVIDIA-btn">NVIDIA<span class="fas fa-caret-down 4-1"></span></a>
                            <ul class="VGA_NVIDIA-show">
                                <li><a href="#">RTX3090</a></li>
                                <li><a href="#">RTX3080Ti</a></li>
                                <li><a href="#">RTX3080</a></li>
                                <li><a href="#">RTX3070Ti</a></li>
                                <li><a href="#">RTX3070</a></li>
                                <li><a href="#">RTX3060Ti</a></li>
                                <li><a href="#">RTX3060</a></li>
                            </ul>
                        </li>
                        <li><a href="#" class="VGA_AMD-btn">AMD<span class="fas fa-caret-down 4-2"></span></a>
                            <ul class="VGA_AMD-show">
                                <li><a href="#">RX6900XT</a></li>
                                <li><a href="#">RX6800XT</a></li>
                                <li><a href="#">RX6800</a></li>
                                <li><a href="#">RX6700XT</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li><a href="#" class="SSD-btn">SSD固態硬碟<span class="fas fa-caret-down 5"></span></a>
                    <ul class="SSD-show">
                        <li><a href="#" class="SSD_SATA-btn">2.5吋 SATA<span class="fas fa-caret-down 5-1"></span></a>
                            <ul class="SSD_SATA-show">
                                <li><a href="#">500G/512G</a></li>
                                <li><a href="#">1TB(含)以上</a></li>
                            </ul>
                        </li>
                        <li><a href="#" class="SSD_M2PCIE-btn">M.2 PCIE<span class="fas fa-caret-down 5-2"></span></a>
                            <ul class="SSD_M2PCIE-show">
                                <li><a href="#">500G/512G</a></li>
                                <li><a href="#">1TB(含)以上</a></li>
                            </ul>
                        </li>
                        <li><a href="#" class="SSD_M2SATA-btn">M.2 SATA<span class="fas fa-caret-down 5-3"></span></a>
                            <ul class="SSD_M2SATA-show">
                                <li><a href="#">500G/512G</a></li>
                                <li><a href="#">1TB(含)以上</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#">電源供應器</a></li>
                <li><a href="#">電腦機殼</a></li>
                <li><a href="#">螢幕</a></li>
            </ul>
        </nav>
    </div>
    <div class="cart_panel">
        <div class="cart_step">
            <ul>
                <li>1. 訂購項目</li>
                <li class="cart_step_second">2. 填寫訂購資料</li>
                <li>3. 完成訂購</li>
            </ul>
        </div>
        <div class="customer_info">
            <div class="sh_from ">
                <form name="form1" onclick="return false">
                    <div class="buyer_info">
                        <i class="far fa-address-card fa-2x" style="color:#f26649;">
                            <span>
                                訂購人資料
                            </span>
                        </i>
                        <div>
                            <br>
                            <span>姓名:</span>
                            <input id="purchaserName" name="purchaserName" type="text" required>
                            <br>
                            <span>地址:</span>
                            <input id="address" name="address" type="text" required>
                            <br>
                            <span>聯絡電話:</span>
                            <input id="phone" name="phone" type="tel" maxlength="10" required>
                            <br>
                            <span>Email:</span>
                            <input id="email" name="email" type="email" required>
                        </div>
                    </div>
                    <div class="buyer_info">
                        <i class="far fa-credit-card fa-2x" style="color:#f26649;">
                            <span>
                                信用卡付款資訊
                            </span>
                        </i>
                        <div>
                            <br>
                            <span>卡片號碼:</span>
                            <input id="card" name="card" type="text" placeholder="**** **** **** ****" required>
                            <br>
                            <span>卡片到期日:</span>
                            <input id="card_date" name="card_date" type="text" placeholder="MM / YY" required>
                            <br>
                            <span>安全碼:</span>
                            <input id="Security_code" name="Security_code" type="text" placeholder="***" required>
                            <br>
                            <!-- <button id="product_info_btn" class="product_info_btn" type="submit">確認訂購並付款</button>
                            <button class="keep_buy_btn" onclick="cart()">上一步</button> -->
                        </div>
                    </div>
                    <button id="product_info_btn" class="product_info_btn">確認訂購並付款</button>
                    <button class="keep_buy_btn" onclick="cart()">上一步</button>
                </form>
            </div>
        </div>
    </div>
    <script>
        // 中央處理器
        $('.CPU-btn').click(function() {
            $('nav ul .CPU-show').toggleClass("show1");
            $('nav ul .1').toggleClass("rotate");
        });
        $('.CPU_INTEL-btn').click(function() {
            $('nav ul .CPU_INTEL-show').toggleClass("show1-1");
            $('nav ul .1-1').toggleClass("rotate");
        });
        $('.CPU_AMD-btn').click(function() {
            $('nav ul .CPU_AMD-show').toggleClass("show1-2");
            $('nav ul .1-2').toggleClass("rotate");
        });

        // 主機板
        $('.MB-btn').click(function() {
            $('nav ul .MB-show').toggleClass("show2");
            $('nav ul .2').toggleClass("rotate");
        });
        $('.MB_Intel-btn').click(function() {
            $('nav ul .MB_INTEL-show').toggleClass("show2-1");
            $('nav ul .2-1').toggleClass("rotate");
        });
        $('.MB_AMD-btn').click(function() {
            $('nav ul .MB_AMD-show').toggleClass("show2-2");
            $('nav ul .2-2').toggleClass("rotate");
        });

        // 記憶體
        $('.RAM-btn').click(function() {
            $('nav ul .RAM-show').toggleClass("show3");
            $('nav ul .3').toggleClass("rotate");
        });

        // 顯示卡
        $('.VGA-btn').click(function() {
            $('nav ul .VGA-show').toggleClass("show4");
            $('nav ul .4').toggleClass("rotate");
        });
        $('.VGA_NVIDIA-btn').click(function() {
            $('nav ul .VGA_NVIDIA-show').toggleClass("show4-1");
            $('nav ul .4-1').toggleClass("rotate");
        });
        $('.VGA_AMD-btn').click(function() {
            $('nav ul .VGA_AMD-show').toggleClass("show4-2");
            $('nav ul .4-2').toggleClass("rotate");
        });

        // SSD固態硬碟
        $('.SSD-btn').click(function() {
            $('nav ul .SSD-show').toggleClass("show5");
            $('nav ul .5').toggleClass("rotate");
        });
        $('.SSD_SATA-btn').click(function() {
            $('nav ul .SSD_SATA-show').toggleClass("show5-1");
            $('nav ul .5-1').toggleClass("rotate");
        });
        $('.SSD_M2PCIE-btn').click(function() {
            $('nav ul .SSD_M2PCIE-show').toggleClass("show5-2");
            $('nav ul .5-2').toggleClass("rotate");
        });
        $('.SSD_M2SATA-btn').click(function() {
            $('nav ul .SSD_M2SATA-show').toggleClass("show5-3");
            $('nav ul .5-3').toggleClass("rotate");
        });


        $('nav ul li').click(function() {
            $(this).addClass("active").siblings().removeClass("active");
        });

        //信用卡格式 
        $("input[name='card']").mask("0000 0000 0000 0000");
        $("input[name='card_date']").mask("00 / 00");
        $("input[name='Security_code']").mask("000");

        function cart() {
            window.location.href = '/cart';
        }
        // let product_info_btn = document.getElementById("product_info_btn");

        // function confirm_order() {
        // product_info_btn.onclick = function() {
        //     // if ($("#purchaserName").val() == "") alert("姓名 不可以空白");
        //     // if ($("#address").val() == "") alert("地址 不可以空白");
        //     // if ($("#phone").val() == "") alert("聯絡電話 不可以空白");
        //     // if ($("#email").val() == "") alert("Email 不可以空白");
        //     // if ($("#card").val() == "") alert("卡片號碼 不可以空白");
        //     // if ($("#card_date").val() == "") alert("卡片到期日 不可以空白");
        //     // if ($("#Security_code").val() == "") alert("安全碼 不可以空白");


        //     let confirm_sure = confirm("確定付款?");
        //     if (confirm_sure) {
        //         $.ajax({
        //             url: "/api/order_confirm",
        //             type: "POST",
        //             dataType: "json",
        //             data: {
        //                 "purchaserName": $("#purchaserName").val(),
        //                 "address": $("#address").val(),
        //                 "phone": $("#phone").val(),
        //                 "email": $("#email").val()
        //             }
        //         })
        //         window.location.href = "/order_complete";
        //     } else
        //         window.location.href = "/cart_order";
        // }
        $(document).ready(function() {
            $("#product_info_btn").click(function() {
                if ($("#purchaserName").val() == "") {
                    alert("你尚未填寫姓名");
                    eval("document.form1['name'].focus()");
                } else if ($("#address").val() == "") {
                    alert("你尚未填寫地址");
                    eval("document.form1['address'].focus()");
                } else if ($("#phone").val() == "") {
                    alert("你尚未填寫聯絡電話");
                    eval("document.form1['phone'].focus()");
                } else if ($("#email").val() == "") {
                    alert("你尚未填寫Email");
                    eval("document.form1['email'].focus()");
                } else if ($("#card").val() == "") {
                    alert("你尚未填寫卡片號碼");
                    eval("document.form1['card'].focus()");
                } else if ($("#card_date").val() == "") {
                    alert("你尚未填寫卡片到期日");
                    eval("document.form1['card_date'].focus()");
                } else if ($("#Security_code").val() == "") {
                    alert("你尚未填寫安全碼");
                    eval("document.form1['Security_code'].focus()");
                } else {
                    document.form1.submit();
                    let confirm_sure = confirm("確定付款?");
                    if (confirm_sure) {
                        $.ajax({
                            url: "/api/order_confirm",
                            type: "POST",
                            dataType: "json",
                            data: {
                                "purchaserName": $("#purchaserName").val(),
                                "address": $("#address").val(),
                                "phone": $("#phone").val(),
                                "email": $("#email").val()
                            }
                        })
                        window.location.href = "/order_complete";
                    }
                }
            })
        })
    </script>
</body>

</html>